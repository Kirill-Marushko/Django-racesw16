{%load static%}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</title>
    <link rel="icon" href="{% static 'imgs/profile-user.png' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f4f8;
            padding-top: 80px;
        }
        .profile-header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 30px;
            border-radius: 0 0 10px 10px;
        }
        .profile-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #fff;
        }
        .card-custom {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            padding: 20px;
        }
        .btn-custom {
            margin-right: 10px;
        }
        .hidden {
            display: none;
        }
        .form-group {
            margin-bottom: 15px;
        }
    </style>
    <script>
        function toggleForm() {
            document.getElementById('editForm').classList.toggle('hidden');
        }

        function toggleBets() {
            document.getElementById('betsList').classList.toggle('hidden');
        }

        function toggleForm() {
            const form = document.getElementById('editForm');
            form.classList.toggle('hidden');
        }

        function toggleBets() {
            const bets = document.getElementById('betsList');
            bets.classList.toggle('hidden');
        }
    </script>
</head>
<body>

{% include "partials/header.html" %}

<!-- üîπ –®–∞–ø–∫–∞ –ø—Ä–æ—Ñ—ñ–ª—é -->
<div class="profile-header d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-3">
        {% if user.profile_image %}
        <img src="{{ user.profile_image.url }}" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ—ñ–ª—é" class="profile-image">
        {% endif %}
        <div>
            <h5 class="mb-0">{{ user.username }}</h5>
            <small>–ë–∞–ª–∞–Ω—Å: <strong>{{ user.balance }} –≥—Ä–Ω</strong></small>
        </div>
    </div>
    <div>
        <a href="{% url 'races' %}" class="text-white me-3 text-decoration-none">üèÅ –ì–æ–Ω–∫–∏</a>
        <a href="/logout/" class="text-white text-decoration-none">üö™ –í–∏–π—Ç–∏</a>
    </div>
</div>

<!-- üîπ –ö–Ω–æ–ø–∫–∏ -->
<div class="mt-3 ms-3 mb-4">
    <div class="d-flex flex-wrap gap-2">
        <button class="btn btn-primary" onclick="toggleForm()">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
        <button class="btn btn-info text-white" onclick="toggleBets()">üí∏ –ú–æ—ó —Å—Ç–∞–≤–∫–∏</button>
        <a href="{% url 'top_up_balance' %}" class="btn btn-success">üí∞ –ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫</a>
    </div>
</div>

<!-- üîπ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ -->
<div class="row ms-3 me-3">
    <!-- üîπ –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é -->
    <div id="editForm" class="col-md-6 mb-4 hidden">
        <div class="card p-4 shadow-sm">
            <h5 class="mb-3">–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</h5>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group mb-3">
                    {{ form.username.label_tag }}
                    {{ form.username }}
                </div>
                <div class="form-group mb-3">
                    {{ form.profile_image.label_tag }}
                    {{ form.profile_image }}
                </div>
                <div class="text-end">
                    <button type="submit" class="btn btn-primary">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>

    <!-- üîπ –°–ø–∏—Å–æ–∫ —Å—Ç–∞–≤–æ–∫ -->
    <div id="betsList" class="col-md-8 mb-4 hidden">
    <div class="card p-4 shadow-sm">
        <h2 class="mb-4">üé≤ –ú–æ—ó —Å—Ç–∞–≤–∫–∏</h2>
        <table class="table table-bordered table-hover">
            <thead class="table-secondary">
            <tr>
                <th>–ì–æ–Ω–∫–∞</th>
                <th>–ì–æ–Ω—â–∏–∫</th>
                <th>–°—É–º–∞</th>
                <th>–ß–∞—Å</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–í–∏–≥—Ä–∞—à</th>
            </tr>
            </thead>
            <tbody>
            {% for bet in bets %}
            <tr>
                <td>{{ bet.race.title }}</td>
                <td>{{ bet.driver.name }}</td>
                <td>{{ bet.amount }} ‚Ç¥</td>
                <td>{{ bet.placed_at|date:"Y-m-d H:i" }}</td>
                <td>
                    {% if bet.race.is_finished %}
                    {% if bet.is_win %}<span class="text-success">–í–∏–≥—Ä–∞–≤</span>
                    {% else %}<span class="text-danger">–ü—Ä–æ–≥—Ä–∞–≤</span>{% endif %}
                    {% else %}
                    <span class="text-warning">–û—á—ñ–∫—É—î—Ç—å—Å—è</span>
                    {% endif %}
                </td>
                <td>
                    {% if bet.is_win %}{{ bet.amount}} ‚Ç¥{% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î —Å—Ç–∞–≤–æ–∫.</td></tr>
            {% endfor %}
            </tbody>
        </table>

    </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--        }-->

<!--        header {-->
<!--            background-color: #2c3e50;-->
<!--            color: white;-->
<!--            padding: 20px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: space-between;-->
<!--        }-->

<!--        .user-info {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 15px;-->
<!--        }-->

<!--        img.profile {-->
<!--            width: 60px;-->
<!--            height: 60px;-->
<!--            border-radius: 50%;-->
<!--            object-fit: cover;-->
<!--            border: 2px solid #fff;-->
<!--        }-->

<!--        .buttons {-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        .buttons button {-->
<!--            padding: 10px 15px;-->
<!--            margin-right: 10px;-->
<!--            background-color: #3498db;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--        }-->

<!--        .hidden {-->
<!--            display: none;-->
<!--        }-->

<!--        .form-group {-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        form {-->
<!--            margin-top: 10px;-->
<!--        }-->

<!--        ul {-->
<!--            list-style-type: none;-->
<!--            padding-left: 0;-->
<!--        }-->

<!--        li {-->
<!--            margin-bottom: 10px;-->
<!--        }-->

<!--        hr {-->
<!--            margin: 10px 0;-->
<!--        }-->
<!--    </style>-->
<!--    <script>-->
<!--        function toggleForm() {-->
<!--            const form = document.getElementById('editForm');-->
<!--            form.classList.toggle('hidden');-->
<!--        }-->

<!--        function toggleBets() {-->
<!--            const bets = document.getElementById('betsList');-->
<!--            bets.classList.toggle('hidden');-->
<!--        }-->
<!--    </script>-->
<!--</head>-->
<!--<body>-->

<!--&lt;!&ndash; üîπ –®–∞–ø–∫–∞ –∑ –ø—Ä–æ—Ñ—ñ–ª–µ–º &ndash;&gt;-->
<!--<header>-->
<!--    <div class="user-info">-->
<!--        {% if user.profile_image %}-->
<!--        <img src="{{ user.profile_image.url }}" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ—ñ–ª—é" class="profile">-->
<!--        {% endif %}-->
<!--        <div>-->
<!--            <strong>{{ user.username }}</strong><br>-->
<!--            –ë–∞–ª–∞–Ω—Å: <strong>{{ user.balance }} –≥—Ä–Ω</strong>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div>-->
<!--        <a href="{% url 'races' %}" style="color: white; text-decoration: none; margin-right: 15px;">üèÅ –ì–æ–Ω–∫–∏</a>-->
<!--        <a href="/logout/" style="color: white; text-decoration: none;">üö™ –í–∏–π—Ç–∏</a>-->
<!--    </div>-->
<!--</header>-->

<!--&lt;!&ndash; üîπ –ö–Ω–æ–ø–∫–∏ &ndash;&gt;-->
<!--<div class="buttons">-->
<!--    <button onclick="toggleForm()">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>-->
<!--    <button onclick="toggleBets()">üí∏ –ú–æ—ó —Å—Ç–∞–≤–∫–∏</button>-->
<!--    <a href="{% url 'top_up_balance' %}" class="btn btn-outline-success">üí∞ –ü–æ–ø–æ–≤–Ω–∏—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫</a>-->
<!--</div>-->


<!--&lt;!&ndash; üîπ –§–æ—Ä–º–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é &ndash;&gt;-->
<!--<div id="editForm" class="hidden">-->
<!--    <form method="post" enctype="multipart/form-data">-->
<!--        {% csrf_token %}-->
<!--        <div class="form-group">-->
<!--            {{ form.username.label_tag }}<br>-->
<!--            {{ form.username }}-->
<!--        </div>-->
<!--        <div class="form-group">-->
<!--            {{ form.profile_image.label_tag }}<br>-->
<!--            {{ form.profile_image }}-->
<!--        </div>-->
<!--        <button type="submit">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>-->
<!--    </form>-->
<!--</div>-->

<!--&lt;!&ndash; üîπ –°–ø–∏—Å–æ–∫ —Å—Ç–∞–≤–æ–∫ &ndash;&gt;-->
<!--<div id="betsList" class="hidden">-->
<!--    <h3>–í–∞—à—ñ —Å—Ç–∞–≤–∫–∏:</h3>-->
<!--    {% if bets %}-->
<!--    <ul>-->
<!--        {% for bet in bets %}-->
<!--        <li>-->
<!--            <strong>{{ bet.race.title }}</strong> ‚Äî {{ bet.race.date_time|date:"Y-m-d H:i" }}<br>-->
<!--            –ì–æ–Ω—â–∏–∫: {{ bet.driver.name }}<br>-->
<!--            –°—Ç–∞–≤–∫–∞: {{ bet.amount }} –≥—Ä–Ω-->
<!--        </li>-->
<!--        <hr>-->
<!--        {% endfor %}-->
<!--    </ul>-->
<!--    {% else %}-->
<!--    <p>–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î —Å—Ç–∞–≤–æ–∫.</p>-->
<!--    {% endif %}-->
<!--</div>-->

<!--</body>-->
<!--</html>-->

